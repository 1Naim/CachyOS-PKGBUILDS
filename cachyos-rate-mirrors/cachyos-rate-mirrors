#!/bin/bash

TMPFILE="$(mktemp)";

sudo true;

function rateArch() {
    rate-mirrors --concurrency=40 --save=$TMPFILE arch \
        && sudo rm /etc/pacman.d/mirrorlist \
        && sudo mv $TMPFILE /etc/pacman.d/mirrorlist
}

function rateCachyOS() {
    rate-mirrors --concurrency=40 --save=$TMPFILE cachyos \
        && sudo rm /etc/pacman.d/cachyos-mirrorlist \
        && sudo mv $TMPFILE /etc/pacman.d/cachyos-mirrorlist
}

function rateCachyOSV3() {
    rate-mirrors --concurrency=40 --save=$TMPFILE cachyos --arch=x86_64_v3 \
        && sudo rm /etc/pacman.d/cachyos-v3-mirrorlist \
        && sudo mv $TMPFILE /etc/pacman.d/cachyos-v3-mirrorlist
}

rateArch
rateCachyOS
rateCachyOSV3
