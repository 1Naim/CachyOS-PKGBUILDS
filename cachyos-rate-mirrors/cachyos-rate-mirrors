#!/bin/bash

sudo true;

function rateArch() {
    TMPFILE="$(mktemp)";

    rate-mirrors --allow-root --concurrency=40 --save=$TMPFILE arch \
        && sudo rm /etc/pacman.d/mirrorlist || true \
        && sudo mv $TMPFILE /etc/pacman.d/mirrorlist
}

function rateCachyOS() {
    TMPFILE="$(mktemp)";

    rate-mirrors --allow-root --concurrency=40 --save=$TMPFILE cachyos \
        && sudo rm /etc/pacman.d/cachyos-mirrorlist || true \
        && sudo mv $TMPFILE /etc/pacman.d/cachyos-mirrorlist
}

function rateCachyOSV3() {
    TMPFILE="$(mktemp)";

    rate-mirrors --allow-root --concurrency=40 --save=$TMPFILE cachyos --arch=x86_64_v3 \
        && sudo rm /etc/pacman.d/cachyos-v3-mirrorlist || true \
        && sudo mv $TMPFILE /etc/pacman.d/cachyos-v3-mirrorlist
}

rateArch
rateCachyOS
rateCachyOSV3
