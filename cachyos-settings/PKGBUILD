# Maintainer: Peter Jung <admin@ptr1337.dev>

_gitname=CachyOS-Settings
pkgname=cachyos-settings
pkgver=1.1.0
pkgrel=2
epoch=1
groups=(cachyos)
arch=('any')
license=(GPL-1.0-only)
makedepends=('coreutils')
pkgdesc='CachyOS - Settings'
source=("git+https://github.com/cachyos/CachyOS-Settings?signed#tag=$pkgver")
install="$pkgname.install"
sha256sums=('d63594322f2a103c14b03f399e2ebf5fb6815764537ad78b6334d4db489aafa8')
validpgpkeys=(
  E8B9AA39F054E30E8290D492C3C4820857F654FE  # Peter Jung <admin@ptr1337.dev>
)

depends=(
    'zram-generator'
    'ananicy-cpp'
    'cachyos-ananicy-rules'
    'inxi'
    'systemd>=256'
)
optdepends=('ruby: for tunecfs2'
            'libluv: for topmem'
            'lua-luv: for topmem'
            'irqbalance'
            'power-profiles-daemon: For game-performance')
prepare() {
  # Cherry Pick Gnome Wayland Workaround removal
  # Gnome 47 does not need it anymore
  git cherry-pick -n 285ac8ba03be514efa489df0d23a17838e82e81b
}
package() {
  install -d "$pkgdir/etc"
  cp -rf "${srcdir}/${_gitname}/etc" "$pkgdir"
  install -d "$pkgdir/usr"
  cp -rf "${srcdir}/${_gitname}/usr" "$pkgdir"
}
