# Maintainer: Michael Bolden <me@sm9.dev>

pkgname=cachyos-hooks
pkgver="$(date +%Y.%m)"
pkgrel=4
pkgdesc='Cachy OS Pacman Hooks'
groups=('cachyos')
arch=('any')
license=('GPL3')
url=https://github.com/cachyos/$pkgname/master
_url=https://raw.githubusercontent.com/cachyos/$pkgname/master

source=(
  $_url/os-release.hook
  $_url/lsb-release.hook
  $_url/${pkgname}.hook
  $_url/${pkgname}-runner
  $_url/cachyos-reboot-required
  $_url/cachyos-check-reboot-required
  $_url/cachyos-reboot-required.hook
)

sha512sums=('e1c475848e7d35db70e1a8f07766579947ad09c655d536d31eed97a309d847b33085cb859c65cb3747f6427e290f938b11c48ac4f20ee539ad5cf226fe434761'
            '42685962732b654653c48cbe48c44dd9dc69696f1bee521ebb61c471d05a65dff3308f42316d54dd3c20a9423055b32bed259c9631af1abc34b1d138be60f2d7'
            '3f8a99c89cbedf978d0174f81c7418647ae1ab5bd269d24c4287885dae698dd16117cafb64eec791d0b6f914e324e57afd33b6787870e6444ba13b6d407c304f'
            '645b627e7b433a5a25d277437dc3a191b1ba0873cb0efafc885a93d6e32acb7e8769abf00318d5c8ff850c0b0e3386791a51f81dcf9b5d45a79ea54b5d1fdedb'
            '897a5117fb90b33a8ef55a50650b3fd666d1c1e6353e8221ed2922b45992fe1e7e719403280a646383173748cc2561470c5a510db1ae7403918c53ea6ed71c2b'
            'f417a16ef193954e9d0c9b403c2ffbaa7cf834d36e030c47c59880b57533265307bb5b43738257a4f64e9572ab2b65ae244644125fe08edb360f497180c5ce2b'
            '9d8431016b91c38bdc5cadf8a9bd499a463489a955081a7a0f86e4b94cc62b90034f114f846f9e9320292341441c85e175f69c2585a51dbee0af7fc7ab84f982')

package() {
  local hooks=$pkgdir/usr/share/libalpm/hooks
  local bin=$pkgdir/usr/bin

  install -Dm644 lsb-release.hook                 $hooks/lsb-release.hook
  install -Dm644 os-release.hook                  $hooks/os-release.hook
  install -Dm644 ${pkgname}.hook                  $hooks/${pkgname}.hook
  install -Dm644 cachyos-reboot-required.hook     $hooks/cachyos-reboot-required.hook

  install -Dm755 cachyos-reboot-required          $bin/cachyos-reboot-required
  install -Dm755 cachyos-check-reboot-required    $bin/cachyos-check-reboot-required
  install -Dm755 ${pkgname}-runner                $bin/${pkgname}-runner
}
